<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>·ä†·à∞·çã ·ã≤·åÇ·â≥·àç ·â¢·äï·åé ·å®·ãã·â≥</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Ethiopic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* MOBILE FIRST DESIGN - OPTIMIZED */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Times New Roman', 'Noto Sans Ethiopic', sans-serif;
            background: linear-gradient(135deg, #0d47a1 0%, #1a237e 100%);
            color: white;
            touch-action: manipulation;
        }

        .amharic-text {
            font-family: 'Noto Sans Ethiopic', 'Times New Roman', sans-serif;
        }

        /* TRIPLE BORDER CONTAINER */
        .border-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 5px;
            background: linear-gradient(45deg, #28a745 0%, #ffd700 33%, #dc3545 66%, #28a745 100%);
            animation: borderGlow 3s infinite alternate;
        }

        .main-container {
            width: 100%;
            height: 100%;
            background: #0d47a1;
            overflow: hidden;
            position: relative;
            border-radius: 8px;
        }

        /* SINGLE PAGE LAYOUT */
        .page-container {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            overflow: hidden;
        }

        .page-container.active {
            transform: translateX(0);
        }

        /* CONNECTION STATUS */
        .connection-status {
            position: fixed;
            top: 5px;
            left: 5px;
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 10px;
            font-weight: bold;
            background: rgba(0,0,0,0.7);
        }

        .connection-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .connection-dot.connected {
            background: #28a745;
            animation: pulse 2s infinite;
        }

        .connection-dot.disconnected {
            background: #dc3545;
        }

        .connection-dot.connecting {
            background: #ffd700;
            animation: pulse 1s infinite;
        }

        /* ADMIN PAGE STYLES */
        .admin-container {
            padding: 10px;
            height: 100%;
            overflow-y: auto;
        }

        .admin-section {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #ffd700;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .admin-title {
            color: #ffd700;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #ffd700;
        }

        .admin-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .admin-btn {
            flex: 1;
            min-width: 120px;
            padding: 12px;
            border: 2px solid #000;
            border-radius: 8px;
            background: #28a745;
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-size: 14px;
        }

        .admin-btn:active {
            transform: scale(0.95);
        }

        .admin-btn.danger {
            background: #dc3545;
        }

        .admin-btn.warning {
            background: #ffc107;
            color: #000;
        }

        .player-count {
            font-size: 24px;
            font-weight: bold;
            color: #28a745;
            text-align: center;
            margin: 10px 0;
        }

        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .player-card {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #ffd700;
            border-radius: 8px;
            padding: 10px;
            font-size: 12px;
        }

        .player-name {
            color: #ffd700;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .player-stats {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
        }

        /* GAME CONTROLS */
        .game-controls-section {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #28a745;
        }

        .number-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .current-number-display {
            font-size: 32px;
            font-weight: bold;
            color: #ffd700;
            text-align: center;
            flex: 1;
            background: rgba(0,0,0,0.5);
            padding: 15px;
            border-radius: 10px;
            border: 3px solid #ffd700;
        }

        .called-numbers-display {
            max-height: 150px;
            overflow-y: auto;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #28a745;
            font-size: 14px;
        }

        .called-number-tag {
            display: inline-block;
            background: rgba(255, 215, 0, 0.2);
            padding: 4px 8px;
            margin: 3px;
            border-radius: 5px;
            border: 1px solid #ffd700;
        }

        /* WINNERS DISPLAY */
        .winners-section {
            background: rgba(40, 167, 69, 0.1);
            border: 2px solid #28a745;
        }

        .winner-card {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid #ffd700;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
        }

        .winner-name {
            color: #28a745;
            font-weight: bold;
            font-size: 16px;
        }

        .winner-prize {
            color: #ffd700;
            font-size: 14px;
            margin-top: 5px;
        }

        /* LOGIN MODAL */
        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-box {
            background: #0d47a1;
            border: 3px solid #ffd700;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
        }

        .login-title {
            color: #ffd700;
            font-size: 24px;
            text-align: center;
            margin-bottom: 25px;
        }

        .login-input {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #000;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            color: #333;
        }

        /* Rest of existing styles remain exactly the same... */
        /* [All existing CSS styles from the original code remain unchanged] */
        
        /* Add this at the end of existing styles */
        @media (max-width: 768px) {
            .admin-controls {
                flex-direction: column;
            }
            
            .admin-btn {
                min-width: 100%;
            }
            
            .players-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- Connection Status -->
    <div class="connection-status" id="connectionStatus">
        <div class="connection-dot disconnected" id="connectionDot"></div>
        <span id="connectionText" class="amharic-text">·àò·åà·äì·äõ ·ã®·àà·àù</span>
    </div>

    <!-- Login Modal (Admin Only) -->
    <div class="login-modal" id="loginModal">
        <div class="login-box">
            <div class="login-title amharic-text">·ã®·ä†·àµ·â∞·ã≥·ã≥·à™ ·àò·åç·â¢·ã´</div>
            <input type="password" id="adminPassword" class="login-input" placeholder="·ã®·ã≠·àà·çç ·âÉ·àç" autocomplete="off">
            <div class="fixed-controls" style="border: none; background: transparent; position: relative; margin-top: 20px;">
                <button class="control-btn btn-success" onclick="adminLogin()">·åç·â£</button>
            </div>
        </div>
    </div>

    <!-- Triple Border Container -->
    <div class="border-container">
        <div class="main-container">
            <!-- Color Borders -->
            <div class="page-border green"></div>
            <div class="page-border yellow"></div>
            <div class="page-border red"></div>

            <!-- Page 0: Welcome -->
            <div class="page-container active" id="page0">
                <button class="help-circle-btn" onclick="showPage(5)">?</button>
                
                <div class="page-content">
                    <div class="welcome-content">
                        <div class="game-title amharic-text">·ä†·à∞·çã ·ã≤·åÇ·â≥·àç ·â¢·äï·åé ·å®·ãã·â≥</div>
                        <div style="font-size: 14px; color: #ffd700; margin-bottom: 30px; text-align: center;">
                            Assefa Gashaye Birhanie Digital Bingo Game (AGBDBG)
                        </div>
                        <button class="start-btn-circle" onclick="showPage(1)">
                            <div style="font-size: 24px;">üéÆ</div>
                        </button>
                        <div class="developer-text amharic-text">·ä†·à∞·çã ·åã·àª·ã¨ ·â•·à≠·àÉ·äï·äê·àÖ</div>
                    </div>
                </div>
            </div>

            <!-- Page 1: Board Selection -->
            <div class="page-container" id="page1">
                <div class="page-content">
                    <div class="page-header amharic-text">·ã®·â¶·à≠·ãµ ·ãì·ã≠·äê·âµ ·ã≠·àù·à®·å°</div>
                    <div class="board-selection-container">
                        <div class="board-type-grid" id="boardTypeGrid"></div>
                    </div>
                </div>
                
                <div class="fixed-controls">
                    <button class="control-btn btn-secondary" onclick="showPage(0)">·â∞·àò·àà·àµ</button>
                    <button class="control-btn btn-success" id="nextBtn">·âÄ·å•·àç</button>
                </div>
            </div>

            <!-- Page 2: Registration -->
            <div class="page-container" id="page2">
                <div class="page-content">
                    <!-- Registration Top Bar -->
                    <div class="registration-top-bar">
                        <button class="top-bar-btn win-btn" onclick="showPotentialWin()">üèÜ</button>
                        <div class="registration-title amharic-text">·àù·ãù·åà·â£</div>
                        <button class="top-bar-btn members-btn" onclick="showMembers()">üë•</button>
                    </div>
                    
                    <div class="registration-form">
                        <div class="form-scroll">
                            <div class="form-group">
                                <label for="playerName" class="amharic-text">·àµ·àù</label>
                                <input type="text" id="playerName" class="form-control" placeholder="·àô·àâ ·àµ·àù">
                            </div>
                            
                            <div class="form-group">
                                <label for="playerPhone" class="amharic-text">·àµ·àç·ä≠</label>
                                <input type="tel" id="playerPhone" class="form-control" placeholder="0918203416">
                            </div>
                            
                            <div class="payment-section">
                                <select id="paymentAmount" class="payment-select" onchange="processPayment()">
                                    <option value="">·ä≠·çç·ã´ ·àò·å†·äï ·ã≠·àù·à®·å°</option>
                                    <option value="25">25 ·â•·à≠</option>
                                    <option value="50">50 ·â•·à≠</option>
                                    <option value="100">100 ·â•·à≠</option>
                                    <option value="200">200 ·â•·à≠</option>
                                    <option value="500">500 ·â•·à≠</option>
                                    <option value="1000">1000 ·â•·à≠</option>
                                    <option value="2000">2000 ·â•·à≠</option>
                                    <option value="5000">5000 ·â•·à≠</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="playerStake" class="amharic-text">·ãç·à≠·à≠·ãµ ·àò·å†·äï</label>
                                <select id="playerStake" class="form-control" onchange="updatePotentialWin()">
                                    <option value="">·ã≠·àù·à®·å°</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="boardSelect" class="amharic-text">·ã®·â¶·à≠·ãµ ·âÅ·å•·à≠</label>
                                <select id="boardSelect" class="form-control">
                                    <option value="">1-100</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="fixed-controls">
                    <button class="control-btn btn-secondary" onclick="showPage(1)">·â∞·àò·àà·àµ</button>
                    <button class="control-btn btn-success" id="confirmBtn">·åÄ·àù·à≠</button>
                </div>
            </div>

            <!-- Page 3: Game Board -->
            <div class="page-container" id="page3">
                <div class="game-header">
                    <div class="game-title-bar amharic-text" id="gameHeader"></div>
                </div>
                
                <div class="game-board-container">
                    <div id="gameBoard"></div>
                </div>
                
                <!-- Circular Call Button -->
                <div class="circular-call-container">
                    <button class="circular-call-btn" id="circularCallBtn">
                        <div id="currentNumberDisplay"></div>
                    </button>
                    <div class="called-numbers-bar" id="calledNumbersBar">
                        <!-- Numbers will be added here -->
                    </div>
                </div>
                
                <!-- Game Controls -->
                <div class="game-controls">
                    <button class="control-btn btn-secondary" onclick="showPage(2)">·â∞·àò·àà·àµ</button>
                    <button class="control-btn btn-info" onclick="showPage(4)">·çã·ã≠·äì·äï·àµ</button>
                    <button class="control-btn btn-success" onclick="announceWin()" id="announceBtn">·ä†·à∏·äì·çä ·äì·àà·àÅ!</button>
                </div>
            </div>

            <!-- Page 4: Finance -->
            <div class="page-container" id="page4">
                <div class="page-content">
                    <div class="page-header amharic-text">·çã·ã≠·äì·äï·àµ</div>
                    
                    <div class="finance-container">
                        <div class="finance-form">
                            <div class="form-group">
                                <label class="amharic-text">·å†·âÖ·àã·àã ·ä≠·çç·ã´</label>
                                <input type="text" id="totalPayment" class="form-control" readonly value="0 ·â•·à≠">
                            </div>
                            
                            <div class="form-group">
                                <label class="amharic-text">·å†·âÖ·àã·àã ·àΩ·àç·àõ·âµ</label>
                                <input type="text" id="totalWon" class="form-control" readonly value="0 ·â•·à≠">
                            </div>
                            
                            <div class="form-group">
                                <label class="amharic-text">·ä†·àÅ·äï ·ã´·àà·ãç</label>
                                <input type="text" id="currentBalance" class="form-control" readonly value="0 ·â•·à≠">
                            </div>
                            
                            <div class="form-group">
                                <label for="withdrawAccount" class="amharic-text">·ã®·ä†·ä´·ãç·äï·âµ ·âÅ·å•·à≠</label>
                                <input type="text" id="withdrawAccount" class="form-control" placeholder="1000062264911">
                            </div>
                            
                            <div class="form-group">
                                <label for="withdrawAmount" class="amharic-text">·àà·àò·ãç·å£·âµ</label>
                                <input type="text" id="withdrawAmount" class="form-control" readonly value="0 ·â•·à≠">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="fixed-controls">
                    <button class="control-btn btn-secondary" onclick="showPage(3)">·â∞·àò·àà·àµ</button>
                    <button class="control-btn btn-success" onclick="processWithdrawal()">·ä†·ãç·å£</button>
                </div>
            </div>

            <!-- Page 5: Detailed Help Information -->
            <div class="page-container" id="page5">
                <div class="page-content">
                    <div class="page-header amharic-text">·ä•·à≠·ã≥·â≥ / Help</div>
                    
                    <!-- Help Navigation -->
                    <div class="help-nav">
                        <button class="help-nav-btn amharic-text active" onclick="showHelpTab('general')">·ä†·å†·âÉ·àã·ã≠</button>
                        <button class="help-nav-btn amharic-text" onclick="showHelpTab('rules')">·ã∞·äï·â¶·âΩ</button>
                        <button class="help-nav-btn amharic-text" onclick="showHelpTab('75ball')">75-·â¢·äï·åé</button>
                        <button class="help-nav-btn amharic-text" onclick="showHelpTab('90ball')">90-·â¢·äï·åé</button>
                        <button class="help-nav-btn amharic-text" onclick="showHelpTab('30ball')">30-·â¢·äï·åé</button>
                        <button class="help-nav-btn amharic-text" onclick="showHelpTab('50ball')">50-·â¢·äï·åé</button>
                        <button class="help-nav-btn amharic-text" onclick="showHelpTab('pattern')">·äï·ãµ·çç ·â¢·äï·åé</button>
                        <button class="help-nav-btn amharic-text" onclick="showHelpTab('coverall')">·àô·àâ ·â§·âµ</button>
                        <button class="help-nav-btn amharic-text" onclick="showHelpTab('winning')">·ã®·àõ·à∏·äê·çç ·àÇ·ã∞·âµ</button>
                        <button class="help-nav-btn amharic-text" onclick="showHelpTab('payment')">·ä≠·çç·ã´ ·àµ·à≠·ãì·âµ</button>
                    </div>
                    
                    <div class="help-content">
                        <!-- General Tab -->
                        <div class="help-tab-content active" id="help-general">
                            <div class="help-section">
                                <div class="help-title amharic-text">·â¢·äï·åé ·àù·äï·ãµ·äï ·äê·ãç? / What is Bingo?</div>
                                <div class="help-text amharic-text">
                                    ·â¢·äï·åé ·ã®·ä†·åã·å£·àö ·âÅ·å•·àÆ·âΩ·äï ·ã®·àö·å†·âÄ·àù ·å®·ãã·â≥ ·äê·ãç·ç¢ ·âÅ·å•·àÆ·âΩ ·â†·ãò·çà·âÄ·ã∞ ·ã≠·å†·à´·àâ·ç£ ·â∞·å´·ãã·âæ·âΩ ·ã∞·åç·àû ·â†·àò·à≥·â∏·ãç ·à∞·äï·å†·à®·ã• ·àã·ã≠ ·â∞·å†·à≠·â∞·ãç ·ã´·ã©·âµ·äï ·àù·àç·ä≠·âµ ·ã´·ã∞·à≠·åã·àâ·ç¢ ·ä†·äï·ãµ ·äï·ãµ·çç ·àô·àâ ·à≤·àÜ·äï "·â¢·äï·åé" ·â†·àõ·àà·âµ ·ã≠·å†·à´·àâ·ç¢
                                </div>
                                <div class="help-text">
                                    Bingo is a game of chance where numbers are randomly drawn and players mark them on their cards. The first to complete a pattern calls "Bingo" and wins.
                                </div>
                            </div>
                            
                            <div class="help-section">
                                <div class="help-title amharic-text">·ã®·å®·ãã·â≥ ·ä†·ãà·âÉ·âÄ·à≠ / Game Structure</div>
                                <div class="help-text amharic-text">
                                    1. ·ã®·å®·ãã·â≥ ·åà·åΩ 6: ·ã®·â∞·àà·ã´·ã© ·â¶·à≠·ãµ ·ãì·ã≠·äê·â∂·âΩ<br>
                                    2. ·àù·ãù·åà·â£ ·åà·åΩ: ·ã®·â∞·å´·ãã·âΩ ·àò·à®·åÉ ·ä•·äì ·ä≠·çç·ã´<br>
                                    3. ·ã®·å®·ãã·â≥ ·â¶·à≠·ãµ: ·ã®·âÅ·å•·à≠ ·àù·àç·ä≠·âµ ·ä•·äì ·ä†·à∏·äì·çä·äê·âµ<br>
                                    4. ·çã·ã≠·äì·äï·àµ ·åà·åΩ: ·àö·ãõ·äï ·ä•·äì ·ã®·àõ·ãç·å£·âµ ·àÇ·ã∞·âµ<br>
                                    5. ·ä•·à≠·ã≥·â≥ ·åà·åΩ: ·ãù·à≠·ãù·à≠ ·àò·àò·à™·ã´ ·â†·ä†·àõ·à≠·äõ ·ä•·äì ·ä•·äï·åç·àä·ãù·äõ
                                </div>
                                <div class="help-text">
                                    1. Game Page 6: Different board types<br>
                                    2. Registration Page: Player info and payment<br>
                                    3. Game Board: Number marking and winning<br>
                                    4. Finance Page: Balance and withdrawal<br>
                                    5. Help Page: Detailed instructions in Amharic and English
                                </div>
                            </div>
                        </div>
                        
                        <!-- Rules Tab -->
                        <div class="help-tab-content" id="help-rules">
                            <div class="help-section">
                                <div class="help-title amharic-text">·ä†·å†·âÉ·àã·ã≠ ·ã∞·äï·â¶·âΩ / General Rules</div>
                                <div class="help-text amharic-text">
                                    1. ·ä•·ã´·äï·ã≥·äï·ã± ·â∞·å´·ãã·âΩ ·ã®·â¢·äï·åé ·à∞·äï·å†·à®·ã• ·ã≠·åà·ãõ·àç<br>
                                    2. ·âÅ·å•·àÆ·âΩ ·â†·ãò·çà·âÄ·ã∞ ·ã≠·å†·à´·àâ (·àÅ·àà 7 ·à∞·ä®·äï·ãµ)<br>
                                    3. ·ã®·â∞·å†·à´·ãç ·âÅ·å•·à≠ ·â†·à∞·äï·å†·à®·ã•·àÖ ·àã·ã≠ ·ä´·àà ·àù·àç·ä≠·âµ ·ä†·ãµ·à≠·åç<br>
                                    4. ·äï·ãµ·çç ·àô·àâ ·ä®·àÜ·äê "·ä†·à∏·äì·çä ·äì·àà·àÅ!" ·âÅ·àç·çâ·äï ·ã≠·äï·ä©<br>
                                    5. ·àΩ·àç·àõ·âµ ·ã≠·âÄ·â†·àã·àâ
                                </div>
                                <div class="help-text">
                                    1. Each player buys a bingo card<br>
                                    2. Numbers are randomly called (every 7 seconds)<br>
                                    3. Mark called numbers on your card<br>
                                    4. Click "I'm Winner!" button when pattern completes<br>
                                    5. Receive your prize
                                </div>
                            </div>
                            
                            <div class="help-section">
                                <div class="help-title amharic-text">·ã®·âÅ·å•·à≠ ·å•·à™ ·ä†·àò·å£·å• / Calling Logic</div>
                                <div class="help-text amharic-text">
                                    ‚Ä¢ ·âÅ·å•·àÆ·âΩ ·â†·à´·àµ-·à∞·à≠ ·ã≠·å†·à´·àâ (·àÅ·àà 7 ·à∞·ä®·äï·ãµ)<br>
                                    ‚Ä¢ ·à†·äï·å†·à®·ã° ·â†·àã·ã≠·äõ·ãç ·ä≠·â• ·âÅ·àç·çç ·àã·ã≠ ·ã≠·â≥·ã´·àç<br>
                                    ‚Ä¢ ·âÅ·å•·à© ·ä®·ä≠·â• ·âÅ·àç·çç ·ãà·ã∞ ·ä†·à´·âµ ·àõ·ãï·ãò·äï ·ä†·àû·àå ·ã≠·åà·äì·äõ·àç<br>
                                    ‚Ä¢ ·âÅ·å•·àÆ·âΩ ·ä®·âÄ·äù ·ãà·ã∞ ·åç·à´ ·ã≠·äï·âÄ·à≥·âÄ·à≥·àâ<br>
                                    ‚Ä¢ ·ä®8 ·âÅ·å•·àÆ·âΩ ·â†·àã·ã≠ ·à≤·àÜ·äë ·ã®·å•·äï·â≥·ãä·ãç ·â∞·ãà·åç·ã∑·àç
                                </div>
                                <div class="help-text">
                                    ‚Ä¢ Numbers auto-call every 7 seconds<br>
                                    ‚Ä¢ Current number appears on circular button<br>
                                    ‚Ä¢ Number moves from circular button to bar<br>
                                    ‚Ä¢ Numbers scroll right to left<br>
                                    ‚Ä¢ Oldest numbers disappear after 8 calls
                                </div>
                            </div>
                        </div>
                        
                        <!-- Rest of help content remains the same -->
                    </div>
                </div>
                
                <div class="fixed-controls">
                    <button class="control-btn btn-success" onclick="showPage(0)">·â∞·àò·àà·àµ</button>
                </div>
            </div>

            <!-- Page 6: Admin Page -->
            <div class="page-container" id="page6">
                <div class="page-content">
                    <div class="page-header amharic-text">·ã®·ä†·àµ·â∞·ã≥·ã≥·à™ ·çì·äê·àç</div>
                    
                    <div class="admin-container">
                        <!-- Connection Status -->
                        <div class="admin-section">
                            <div class="admin-title amharic-text">·å®·ãã·â≥ ·àÅ·äî·â≥</div>
                            <div class="player-count amharic-text" id="connectedPlayersCount">0 ·â∞·å´·ãã·âæ·âΩ</div>
                            <div class="admin-controls">
                                <button class="admin-btn" onclick="startGame()" id="startGameBtn">·å®·ãã·â≥ ·åÄ·àù·à≠</button>
                                <button class="admin-btn danger" onclick="endGame()" id="endGameBtn">·å®·ãã·â≥ ·ä†·âÅ·àù</button>
                                <button class="admin-btn" onclick="callNumber()" id="callNumberBtn">·âÅ·å•·à≠ ·å•·à´</button>
                                <button class="admin-btn warning" onclick="resetGame()">·ã≥·åç·àù ·åÄ·àù·à≠</button>
                            </div>
                        </div>

                        <!-- Game Controls -->
                        <div class="admin-section game-controls-section">
                            <div class="admin-title amharic-text">·ã®·å®·ãã·â≥ ·àò·âÜ·å£·å†·à™·ã´</div>
                            <div class="number-controls">
                                <div class="current-number-display" id="adminCurrentNumber">--</div>
                                <button class="admin-btn" onclick="callNumber()">·âÄ·å£·ã≠ ·âÅ·å•·à≠</button>
                            </div>
                            <div class="called-numbers-display" id="adminCalledNumbers">
                                <div class="amharic-text">·ã®·â∞·å†·à© ·âÅ·å•·àÆ·âΩ ·ä•·ãö·àÖ ·ã≠·â≥·ã´·àâ...</div>
                            </div>
                        </div>

                        <!-- Connected Players -->
                        <div class="admin-section">
                            <div class="admin-title amharic-text">·â∞·å´·ãã·âæ·âΩ</div>
                            <div class="players-grid" id="playersList">
                                <!-- Player cards will be added here -->
                            </div>
                        </div>

                        <!-- Winners -->
                        <div class="admin-section winners-section">
                            <div class="admin-title amharic-text">·ä†·à∏·äì·çä·ãé·âΩ</div>
                            <div id="winnersList">
                                <!-- Winner cards will be added here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="fixed-controls">
                    <button class="control-btn btn-danger" onclick="logoutAdmin()">·ãç·å£</button>
                    <button class="control-btn btn-info" onclick="exportData()">·ãç·àÇ·â• ·ä†·ãç·å£</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals (Members, Potential Win, Notification, Winner) remain exactly the same -->
    <!-- [All existing modals remain unchanged] -->

    <script>
        // WebSocket Configuration
        const WS_CONFIG = {
            // For local testing: 'ws://localhost:8080'
            // For Deno Deploy: 'wss://your-project.deno.dev'
            // For GitHub Pages with Deno Deploy backend: 'wss://your-backend.deno.dev'
            URL: window.location.hostname.includes('github.io') 
                ? 'wss://your-bingo-backend.deno.dev'  // Replace with your actual Deno Deploy URL
                : 'ws://localhost:8080',  // For local testing
            RECONNECT_DELAY: 3000,
            MAX_RECONNECT_ATTEMPTS: 5
        };

        // Game State
        const gameState = {
            // Connection state
            ws: null,
            isConnected: false,
            reconnectAttempts: 0,
            isAdmin: false,
            adminAuthenticated: false,
            
            // Player state
            playerId: null,
            sessionId: null,
            gameType: null,
            payment: 0,
            paymentAmount: 25,
            stake: 25,
            totalWon: 0,
            boardId: 1,
            calledNumbers: [],
            markedNumbers: new Set(),
            gameActive: false,
            isCalling: true,
            callInterval: null,
            playerName: '',
            playerPhone: '',
            totalWithdrawn: 0,
            
            // Multiplayer state
            connectedPlayers: [],
            currentNumber: null,
            gameStarted: false,
            winners: [],
            
            // Board types remain the same
            boardTypes: [
                { id: '75ball', name: '75-·â¢·äï·åé', icon: 'üéØ', desc: '5√ó5 ·ä®BINGO', range: 75, columns: 5 },
                { id: '90ball', name: '90-·â¢·äï·åé', icon: 'üá¨üáß', desc: '9√ó3 ·çà·å£·äï', range: 90, columns: 9 },
                { id: '30ball', name: '30-·â¢·äï·åé', icon: '‚ö°', desc: '3√ó3 ·çç·å•·äê·âµ', range: 30, columns: 3 },
                { id: '50ball', name: '50-·â¢·äï·åé', icon: 'üé≤', desc: '5√ó5 ·ä®BINGO', range: 50, columns: 5 },
                { id: 'pattern', name: '·äï·ãµ·çç ·â¢·äï·åé', icon: '‚ú®', desc: '·â∞·å†·âÄ·àù ·äï·ãµ·çç', range: 75, columns: 5 },
                { id: 'coverall', name: '·àô·àâ ·â§·âµ', icon: 'üèÜ', desc: '·àÅ·àâ·äï·àù ·àù·àç·ä≠·âµ ·ã´·ãµ·à≠·åâ', range: 90, columns: 9 }
            ],
            
            winningPatterns: {
                '75ball': ['row', 'column', 'diagonal', 'four-corners', 'full-house'],
                '90ball': ['one-line', 'two-lines', 'full-house'],
                '30ball': ['full-house'],
                '50ball': ['row', 'column', 'diagonal', 'four-corners', 'full-house'],
                'pattern': ['x-pattern', 'frame', 'postage-stamp', 'small-diamond'],
                'coverall': ['full-board']
            }
        };

        // WebSocket Functions
        function connectWebSocket() {
            try {
                updateConnectionStatus('connecting', '·àò·åà·äì·äò·âµ...');
                
                gameState.ws = new WebSocket(WS_CONFIG.URL);
                
                gameState.ws.onopen = function() {
                    console.log('WebSocket connected');
                    gameState.isConnected = true;
                    gameState.reconnectAttempts = 0;
                    updateConnectionStatus('connected', '·â∞·åà·äì·äù·â∑·àç');
                    
                    // Generate session ID if not exists
                    if (!gameState.sessionId) {
                        gameState.sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    }
                    
                    // Check if admin mode
                    const urlParams = new URLSearchParams(window.location.search);
                    gameState.isAdmin = urlParams.get('admin') === 'true';
                    
                    if (gameState.isAdmin) {
                        // Show login modal for admin
                        document.getElementById('loginModal').style.display = 'flex';
                        showPage(6); // Show admin page
                    } else {
                        // Player mode - send connection message
                        sendMessage({
                            type: 'player_connect',
                            sessionId: gameState.sessionId
                        });
                    }
                };
                
                gameState.ws.onmessage = function(event) {
                    try {
                        const message = JSON.parse(event.data);
                        handleServerMessage(message);
                    } catch (error) {
                        console.error('Error parsing message:', error);
                    }
                };
                
                gameState.ws.onclose = function(event) {
                    console.log('WebSocket disconnected:', event.code, event.reason);
                    gameState.isConnected = false;
                    updateConnectionStatus('disconnected', '·àò·åà·äì·äõ ·â∞·âã·à≠·åß·àç');
                    
                    // Attempt reconnect for players
                    if (!gameState.isAdmin || gameState.adminAuthenticated) {
                        setTimeout(connectWebSocket, WS_CONFIG.RECONNECT_DELAY);
                        gameState.reconnectAttempts++;
                        
                        if (gameState.reconnectAttempts >= WS_CONFIG.MAX_RECONNECT_ATTEMPTS) {
                            showNotification('·ä•·â£·ä≠·ãé ·ä•·äï·ã∞·åà·äì ·ã≠·àû·ä≠·à©', false);
                        }
                    }
                };
                
                gameState.ws.onerror = function(error) {
                    console.error('WebSocket error:', error);
                    updateConnectionStatus('disconnected', '·àµ·àÖ·â∞·âµ ·â∞·ä®·àµ·â∑·àç');
                };
                
            } catch (error) {
                console.error('Error connecting WebSocket:', error);
                updateConnectionStatus('disconnected', '·àõ·åà·äì·äò·âµ ·ä†·àç·â∞·âª·àà·àù');
            }
        }

        function updateConnectionStatus(status, text) {
            const dot = document.getElementById('connectionDot');
            const textElem = document.getElementById('connectionText');
            
            dot.className = 'connection-dot ' + status;
            textElem.textContent = text;
            
            if (status === 'connected') {
                setTimeout(() => {
                    textElem.textContent = gameState.isAdmin ? '·ä†·àµ·â∞·ã≥·ã≥·à™' : '·â∞·å´·ãã·âΩ';
                }, 2000);
            }
        }

        function sendMessage(message) {
            if (gameState.ws && gameState.ws.readyState === WebSocket.OPEN) {
                gameState.ws.send(JSON.stringify(message));
                return true;
            } else {
                console.warn('WebSocket not ready');
                return false;
            }
        }

        function handleServerMessage(message) {
            console.log('Received message:', message);
            
            switch (message.type) {
                case 'game_state':
                    updateGameState(message.data);
                    break;
                    
                case 'number_called':
                    handleNumberCalled(message.number, message.display);
                    break;
                    
                case 'player_joined':
                    updatePlayerList(message.players);
                    break;
                    
                case 'player_left':
                    updatePlayerList(message.players);
                    break;
                    
                case 'game_started':
                    gameState.gameStarted = true;
                    showNotification('·å®·ãã·â≥ ·åÄ·àù·àØ·àç!', false);
                    updateGameControls(true);
                    break;
                    
                case 'game_ended':
                    gameState.gameStarted = false;
                    showNotification('·å®·ãã·â≥ ·ä†·àç·âã·àç', false);
                    updateGameControls(false);
                    break;
                    
                case 'winner_declared':
                    handleWinner(message.winner);
                    break;
                    
                case 'player_registered':
                    handlePlayerRegistered(message.playerId);
                    break;
                    
                case 'admin_auth_result':
                    handleAdminAuth(message.success, message.message);
                    break;
                    
                case 'error':
                    showNotification(message.message || '·àµ·àÖ·â∞·âµ ·â∞·ä®·àµ·â∑·àç', false);
                    break;
            }
        }

        // Admin Functions
        function adminLogin() {
            const password = document.getElementById('adminPassword').value;
            
            if (!password) {
                showNotification('·ã®·ã≠·àà·çç ·âÉ·àç ·ã´·àµ·åà·â°', false);
                return;
            }
            
            sendMessage({
                type: 'admin_login',
                password: password
            });
        }

        function handleAdminAuth(success, message) {
            if (success) {
                gameState.adminAuthenticated = true;
                document.getElementById('loginModal').style.display = 'none';
                showNotification('·â†·â∞·à≥·ä´ ·àÅ·äî·â≥ ·åà·â•·â∞·ãã·àç!', false);
                
                // Request current game state
                sendMessage({ type: 'get_game_state' });
            } else {
                showNotification(message || '·ã®·ã≠·àà·çç ·âÉ·àç ·ã®·â∞·à≥·à≥·â∞ ·äê·ãç', false);
            }
        }

        function startGame() {
            if (!gameState.adminAuthenticated) return;
            
            sendMessage({
                type: 'start_game'
            });
        }

        function endGame() {
            if (!gameState.adminAuthenticated) return;
            
            sendMessage({
                type: 'end_game'
            });
        }

        function callNumber() {
            if (!gameState.adminAuthenticated) return;
            
            sendMessage({
                type: 'call_number'
            });
        }

        function resetGame() {
            if (!gameState.adminAuthenticated) return;
            
            if (confirm('·àÅ·àâ·äï·àù ·ãç·àÇ·â• ·àò·à∞·à®·ãù ·ã≠·çà·àç·åã·àâ?')) {
                sendMessage({
                    type: 'reset_game'
                });
            }
        }

        function logoutAdmin() {
            gameState.adminAuthenticated = false;
            gameState.isAdmin = false;
            showPage(0); // Go to welcome page
            window.history.replaceState({}, document.title, window.location.pathname);
        }

        function exportData() {
            // Simple data export
            const data = {
                players: gameState.connectedPlayers,
                winners: gameState.winners,
                calledNumbers: gameState.calledNumbers,
                timestamp: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `bingo_data_${Date.now()}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }

        // Player Functions
        function confirmRegistration() {
            const name = document.getElementById('playerName').value;
            const phone = document.getElementById('playerPhone').value;
            const stake = document.getElementById('playerStake').value;
            const board = document.getElementById('boardSelect').value;
            
            if (!name || !phone || !stake || !board || !gameState.gameType) {
                showNotification('·ä•·â£·ä≠·ãé ·àÅ·àâ·äï·àù ·àò·à®·åÉ·ãé·âΩ ·ã≠·àô·àâ', false);
                return;
            }
            
            gameState.playerName = name;
            gameState.playerPhone = phone;
            gameState.stake = parseInt(stake);
            gameState.boardId = board;
            
            // Register with server
            sendMessage({
                type: 'register_player',
                player: {
                    name: name,
                    phone: phone,
                    stake: gameState.stake,
                    boardId: board,
                    gameType: gameState.gameType,
                    payment: gameState.payment
                }
            });
        }

        function handlePlayerRegistered(playerId) {
            gameState.playerId = playerId;
            showPage(3); // Go to game board
            generateGameBoard();
            
            // Request current game state
            sendMessage({ type: 'get_game_state' });
        }

        function announceWin() {
            if (!gameState.gameActive || !gameState.playerId) return;
            
            const win = calculateWin();
            if (win) {
                sendMessage({
                    type: 'declare_win',
                    playerId: gameState.playerId,
                    pattern: win.pattern,
                    markedNumbers: Array.from(gameState.markedNumbers)
                });
            } else {
                showNotification('·ä†·à∏·äì·çä ·äï·ãµ·çç ·ä†·àç·â∞·å†·äì·âÄ·âÄ·àù·ç¢ ·ä•·â£·ä≠·ãé ·ã≠·âÜ·å•·à©!', false);
            }
        }

        // UI Update Functions
        function updateGameState(state) {
            if (state.calledNumbers) {
                gameState.calledNumbers = state.calledNumbers;
                updateCalledNumbersDisplay();
            }
            
            if (state.currentNumber) {
                gameState.currentNumber = state.currentNumber;
                document.getElementById('currentNumberDisplay').textContent = state.currentNumber;
                
                if (gameState.isAdmin) {
                    document.getElementById('adminCurrentNumber').textContent = state.currentNumber;
                }
            }
            
            if (state.players) {
                updatePlayerList(state.players);
            }
            
            if (state.winners) {
                gameState.winners = state.winners;
                updateWinnersDisplay();
            }
            
            if (state.gameStarted !== undefined) {
                gameState.gameStarted = state.gameStarted;
                updateGameControls(state.gameStarted);
            }
        }

        function updatePlayerList(players) {
            gameState.connectedPlayers = players;
            
            if (gameState.isAdmin) {
                // Update admin player list
                const playersList = document.getElementById('playersList');
                playersList.innerHTML = '';
                
                players.forEach(player => {
                    const card = document.createElement('div');
                    card.className = 'player-card';
                    card.innerHTML = `
                        <div class="player-name">${player.name}</div>
                        <div class="player-stats">
                            <span>·ãç·à≠·à≠·ãµ: ${player.stake} ·â•·à≠</span>
                            <span>·â¶·à≠·ãµ: ${player.boardId}</span>
                        </div>
                        <div class="player-stats">
                            <span>·àù·àç·ä≠·â∂·âΩ: ${player.markedCount || 0}</span>
                            <span>·àÅ·äî·â≥: ${player.status || '·å®·ãã·â≥'}</span>
                        </div>
                    `;
                    playersList.appendChild(card);
                });
                
                // Update player count
                document.getElementById('connectedPlayersCount').textContent = 
                    `${players.length} ·â∞·å´·ãã·âæ·âΩ`;
            }
        }

        function updateWinnersDisplay() {
            if (!gameState.isAdmin) return;
            
            const winnersList = document.getElementById('winnersList');
            winnersList.innerHTML = '';
            
            gameState.winners.forEach(winner => {
                const card = document.createElement('div');
                card.className = 'winner-card';
                card.innerHTML = `
                    <div class="winner-name">${winner.name}</div>
                    <div class="winner-prize">·àΩ·àç·àõ·âµ: ${winner.prize} ·â•·à≠</div>
                    <div style="font-size: 12px; color: #ccc;">·ã®·ãµ·àç ·äï·ãµ·çç: ${winner.pattern}</div>
                    <div style="font-size: 10px; color: #888;">${new Date(winner.timestamp).toLocaleTimeString()}</div>
                `;
                winnersList.appendChild(card);
            });
        }

        function updateGameControls(gameStarted) {
            if (gameState.isAdmin) {
                const startBtn = document.getElementById('startGameBtn');
                const endBtn = document.getElementById('endGameBtn');
                const callBtn = document.getElementById('callNumberBtn');
                
                if (gameStarted) {
                    startBtn.disabled = true;
                    endBtn.disabled = false;
                    callBtn.disabled = false;
                    startBtn.style.opacity = '0.5';
                    endBtn.style.opacity = '1';
                    callBtn.style.opacity = '1';
                } else {
                    startBtn.disabled = false;
                    endBtn.disabled = true;
                    callBtn.disabled = true;
                    startBtn.style.opacity = '1';
                    endBtn.style.opacity = '0.5';
                    callBtn.style.opacity = '0.5';
                }
            }
        }

        function handleNumberCalled(number, display) {
            gameState.calledNumbers.push(number);
            
            // Update player display
            if (!gameState.isAdmin) {
                const currentDisplay = document.getElementById('currentNumberDisplay');
                currentDisplay.textContent = display || number;
                
                // Add to called numbers bar
                moveNumberToBar(display || number);
                
                // Check if player has this number
                const cells = document.querySelectorAll('.board-cell[data-number]');
                cells.forEach(cell => {
                    if (parseInt(cell.dataset.number) === number) {
                        if (!cell.classList.contains('marked')) {
                            cell.classList.add('marked');
                            gameState.markedNumbers.add(number);
                            
                            // Notify server
                            sendMessage({
                                type: 'number_marked',
                                playerId: gameState.playerId,
                                number: number
                            });
                        }
                    }
                });
            } else {
                // Update admin display
                document.getElementById('adminCurrentNumber').textContent = display || number;
                updateAdminCalledNumbers();
            }
        }

        function handleWinner(winner) {
            if (winner.playerId === gameState.playerId) {
                // This player won!
                const winAmount = calculatePotentialWin(gameState.stake);
                gameState.totalWon += winAmount;
                
                document.getElementById('winnerName').textContent = gameState.playerName;
                document.getElementById('winPattern').textContent = winner.pattern;
                document.getElementById('displayWinAmount').textContent = `${winAmount.toLocaleString()} ·â•·à≠`;
                document.getElementById('winnerNotification').style.display = 'block';
                
                // Play win sound
                const audio = document.getElementById('winAudio');
                audio.currentTime = 0;
                audio.play().catch(() => {});
            }
            
            // Show notification for all
            showNotification(`${winner.name} ·â¢·äï·åé ·ä†·à∏·äê·çà!`, false);
        }

        // Helper Functions (from original code, adapted for multiplayer)
        function generateGameBoard() {
            // Same as original, but now board is generated locally
            const board = document.getElementById('gameBoard');
            const header = document.getElementById('gameHeader');
            const type = gameState.boardTypes.find(t => t.id === gameState.gameType);
            
            board.innerHTML = '';
            header.textContent = `${type.name} - ·â¶·à≠·ãµ ${gameState.boardId}`;
            
            // ... rest of board generation code remains the same
            // [Include all original board generation functions here]
        }

        function calculatePotentialWin(stake) {
            const validMembers = 90;
            const potential = (0.8 * validMembers * stake * 0.97);
            return Math.floor(potential);
        }

        function calculateWin() {
            // Same win calculation logic as original
            // [Include original win calculation logic]
        }

        // Initialize
        function init() {
            // Setup UI components
            setupBoardSelection();
            setupStakeOptions();
            setupBoardNumbers();
            updatePotentialWin();
            
            // Set up button event listeners
            document.getElementById('nextBtn').onclick = () => {
                if (gameState.gameType) showPage(2);
                else showNotification('·ä•·â£·ä≠·ãé ·ã®·â¶·à≠·ãµ ·ãì·ã≠·äê·âµ ·ã≠·àù·à®·å°', false);
            };
            document.getElementById('confirmBtn').onclick = confirmRegistration;
            document.getElementById('circularCallBtn').onclick = toggleCalling;
            document.getElementById('playerStake').onchange = updatePotentialWin;
            document.getElementById('paymentAmount').onchange = processPayment;
            document.getElementById('announceBtn').onclick = announceWin;
            
            // Connect to WebSocket
            connectWebSocket();
            
            // Check for admin mode
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('admin') === 'true') {
                document.getElementById('loginModal').style.display = 'flex';
                showPage(6);
            }
        }

        // Start everything
        window.addEventListener('DOMContentLoaded', init);
        
        // Handle mobile gestures
        document.addEventListener('touchstart', (e) => {
            if (e.touches.length > 1) e.preventDefault();
        }, { passive: false });
        
        document.addEventListener('gesturestart', (e) => e.preventDefault());
        
        // Handle beforeunload
        window.addEventListener('beforeunload', () => {
            if (gameState.ws && gameState.ws.readyState === WebSocket.OPEN) {
                sendMessage({
                    type: 'player_disconnect',
                    playerId: gameState.playerId,
                    sessionId: gameState.sessionId
                });
            }
        });
    </script>
</body>
</html>
